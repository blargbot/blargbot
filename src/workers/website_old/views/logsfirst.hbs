<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Latest compiled and minified CSS -->
    <!--
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
-->
    <!--Import Google Icon Font-->
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link href="//fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

    <link rel="stylesheet" href="../css/main.css">

    <!-- Font Awesome -->
    <script src="//use.fontawesome.com/811ca3dd9f.js"></script>

    <!-- jQuery library -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Compiled and minified JavaScript -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

    <!-- Misc Scripts -->
    <script src="../js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>

    <!-- Fonts -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- OpenGraph -->
    <title>Logs</title>

    <link rel="icon" type="image/png" href="/img/blargbotmini.png">

</head>
<script>
    $(document).ready(function () {
        if (window.location.hash) {
            setTimeout(function () {
                $('#timeout').html('Loading the logs seems to be taking longer than usual. This could be caused by an invalid or unspecified hash, or by something breaking internally. </p><p>Please make sure that you\'re using a link provided by the bot, and if the problem persists please contact me by using the suggest command.');
            }, 20000);
            var hash = window.location.hash.substring(1);

            var request = $.ajax({
                url: '/logs',
                method: 'POST',
                data: { hash: hash }
            })
            request.done(function (msg) {
                $('body').html(msg);
                loaded = true
            })
        } else {
            $('#loadingheader').html('No keycode provided.')
            $('#loaders').html('Please use the <code>logs</code> command to retrieve a valid URL.')
        }


    });

</script>

<body class="blue-grey">
    {{> sidebar}}
    <a class="btn-floating btn-primary button-collapse btn-large waves-effects waves-light" data-activates="slide-out">
        <i class="large material-icons">menu</i></a>
    <header class="page-header">

        <h1 class="centre" id='loadingheader'>Attempting to load logs...</h1>
        <div class="row">

            <div class="col s12 m8 offset-m2 l6 offset-l3">

                <div class="card blue-grey darken-2">
                    <div class="card-content">
                        <div class='centre' id='loaders'>
                            <div class="preloader-wrapper big active">
                                <div class="spinner-layer spinner-blue">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>

                                <div class="spinner-layer spinner-red">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>

                                <div class="spinner-layer spinner-yellow">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>

                                <div class="spinner-layer spinner-green">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>
                            </div>
                            <p id='timeout'></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </header>

    <style>
        .collection {
            border: 0;
        }

        .collection-item {
            border-bottom: 1px solid #394a52 !important;
        }

        .edit {
            background-color: #593864 !important;
            border-bottom: 1px solid #37213e !important;
        }

        .delete {
            background-color: #7e3f3f !important;
            border-bottom: 1px solid #4b2525 !important;
            /* background-color: #753838 !important; */
        }
    </style>

    <main>
        <div class="section">

            <div class="row">
                <div class="col s12 m10 offset-m1">
                    <div class="card z-depth-2 blue-grey darken-2">
                        <ul class="collection">


                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="page-footer blue-grey darken-2">
        <div class="section">
            <div class="rows">
                <div class="col s12 m10 offset-m1 l6 offset-l3">
                    <p class="centre">
                        &copy; 2016-2018 - Ratismal (stupid cat)
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <script>
        init();
        function doStuff() {
            var first = true;
            var elements = document.getElementsByClassName('time');
            for (var i = 0; i < elements.length; i++) {
                var timestamp = elements.item(i).innerHTML;
                var newTimestamp = moment(parseInt(timestamp));
                elements.item(i).innerHTML = newTimestamp.format('YYYY/MM/DD h:mm:ss A');
            }
            console.log('hi');
        }
        doStuff();

    </script>


</body>

</html>